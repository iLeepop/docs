# 容器

### 基础

容器的存在意义就是为了其中的应用提供运行环境，容器运行就是为了运行其中的应用，让其中的应用对外提供服务。容器内应用运行完毕后，容器就会自动终止。

### 容器创建并启动

[docker run](#run-命令)用于创建并启动容器，同时会运行容器中指定的应用。这个指定的应用要么通过[docker run](#run-命令)中的[command]指定，要么通过容器的 Dockerfile 中的 CMD 指令指定。

容器两种启动模式：交互模式 -it，分离模式 -d。

### 容器启动流程与容器启动本质

### 容器创建

[docker create](#create-命令)命令仅用于创建一个容器，并不会启动容器。该命令没有-d 选项，因为[docker create](#create-命令)创建的容器默认都是以后台方式来运行的(必须通过[docker start](#start-命令) [容器]来启动)，除非在创建时指定 -it。

### 容器退出

- exit：退出并终止当进程。
- ctrl+p+q：退出但不终止当前进程。

### 容器状态查看

[docker ps](#ps-命令)命令中 -a, -q, -l, -n。

### 容器再进

[docker exec](#exec-命令)与[docker attach](#attach-命令)的区别与联系

[docker exec](#exec-命令)会创建一个新进程来访问进程，一般与 -it 选项联用，一般使用 exit 命令退出并终止当前进程。

[docker attach](#attach-命令)不会创建新进程，而是将标准输入与标准输出直接附着在容器进程之上(使用户可以通过键盘来操作容器，使容器中的输出可通过显示器展示给用户)，一般不使用选项。但需要考虑退出容器的方式是使用 exit 还是 ctrl+p+q。

### 容器内进程查看

[docker top](#top-命令)命令后可携带 ps 命令的选项。

### 容器日志查看

[docker logs](#logs-命令)查看的是容器中应用运行日志。这个应用是根据容器创建时命令([docker run](#run-命令)或者[docker create](#create-命令))中的[command]指定，或通过容器镜像的 Dockerfile 中的 CMD 指令指定。

### 容器启停

[docker start](#start-命令)启动的是容器本身，但容器在启动的同时会启动一个应用，而这个应用是根据容器创建时命令中的[command]指定，或通过容器镜像的 Dockerfile 中的 CMD 指令指定。

容器停止命令停止的是容器本身，但在容器停止之前会先停止容器中的所有进程的运行，也就停止了对外提供服务的应用进程。

[docker pause](#pause-命令)仅暂停的是容器对外提供的服务，容器本身没有停止运行，所以容器中的应用也就没有停止运行，只不过其不能通过容器再对外提供服务了。

### 容器删除

[docker rm](#rm-命令)进行容器删除，选项 -f 进行强制删除。

[docker rmi](#rmi-命令)进行镜像删除，选项 -f 进行强制删除，镜像的强制删除不会强制删除 UP 状态的容器的镜像。

### 容器与宿主机文件传递

- 理解容器本身就是一个文件系统
- 理解[docker cp](#cp-命令)就是用于完成从一个文件系统复制到另一个文件系统的操作，与容器是否运行无关
- 了解[docker cp](#cp-命令)不支持容器间的文件复制

### 提交容器为镜像

- [docker commit](#commit-命令)生成的镜像中包含容器的原镜像的所有分层信息包括历史记录

### 容器的导入导出

- 理解[容器镜像的导入导出对比](#容器镜像的导入导出对比)
- 理解 docker export 是对镜像分层合并后视图的文件系统快照的导出，仅包含合并后的一层镜像信息，不包含原镜像分层历史记录。
