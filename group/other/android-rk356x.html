<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/docs/icon/fav.png"><title>Modify | Ilee-Docs</title><meta name="description" content="欢迎查看我的技术文档">
    <link rel="preload" href="/docs/assets/style-8f532611.css" as="style"><link rel="stylesheet" href="/docs/assets/style-8f532611.css">
    <link rel="modulepreload" href="/docs/assets/app-06cd0c15.js"><link rel="modulepreload" href="/docs/assets/android-rk356x.html-c26151d9.js"><link rel="modulepreload" href="/docs/assets/android-rk356x.html-941d6980.js"><link rel="prefetch" href="/docs/assets/index.html-00dffd4f.js" as="script"><link rel="prefetch" href="/docs/assets/logs.html-501721c3.js" as="script"><link rel="prefetch" href="/docs/assets/todo.html-561701e3.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-cc4f243b.js" as="script"><link rel="prefetch" href="/docs/assets/demo.html-7913bc60.js" as="script"><link rel="prefetch" href="/docs/assets/datapack.html-cf358527.js" as="script"><link rel="prefetch" href="/docs/assets/fabric.html-3c7e41eb.js" as="script"><link rel="prefetch" href="/docs/assets/server.html-6f3c6d18.js" as="script"><link rel="prefetch" href="/docs/assets/cli-node.html-e1948aa2.js" as="script"><link rel="prefetch" href="/docs/assets/raspberryPi.html-0a2eb538.js" as="script"><link rel="prefetch" href="/docs/assets/http.html-2b7373ec.js" as="script"><link rel="prefetch" href="/docs/assets/network.html-90079102.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-aef3f55e.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-09fd5bf7.js" as="script"><link rel="prefetch" href="/docs/assets/jsFunc.html-5a56c6d5.js" as="script"><link rel="prefetch" href="/docs/assets/jsUsed.html-c7f85ddf.js" as="script"><link rel="prefetch" href="/docs/assets/jsValue.html-fe504b22.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-c5fa3a89.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-94e58d05.js" as="script"><link rel="prefetch" href="/docs/assets/sqlInstall.html-75f8af58.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-ab873c32.js" as="script"><link rel="prefetch" href="/docs/assets/tsStart.html-40d797d2.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-be8c9290.js" as="script"><link rel="prefetch" href="/docs/assets/base.html-11d6dc2a.js" as="script"><link rel="prefetch" href="/docs/assets/start.html-73dec716.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-1d3f2c38.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-53fd045f.js" as="script"><link rel="prefetch" href="/docs/assets/Dockerfile.html-0fb604bf.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-53d97ad6.js" as="script"><link rel="prefetch" href="/docs/assets/dockerCommand.html-48311a2f.js" as="script"><link rel="prefetch" href="/docs/assets/dockerCommonServers.html-8aad5dd9.js" as="script"><link rel="prefetch" href="/docs/assets/dockerCompose.html-6d30d364.js" as="script"><link rel="prefetch" href="/docs/assets/dockerContainer.html-7b3a0224.js" as="script"><link rel="prefetch" href="/docs/assets/dockerDataPersistence.html-fc8719a9.js" as="script"><link rel="prefetch" href="/docs/assets/dockerEngine.html-9d08d46f.js" as="script"><link rel="prefetch" href="/docs/assets/dockerImage.html-a0e1ffeb.js" as="script"><link rel="prefetch" href="/docs/assets/dockerNetwork.html-37a5d973.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-a5dec40d.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-8533501a.js" as="script"><link rel="prefetch" href="/docs/assets/forgot.html-d6480176.js" as="script"><link rel="prefetch" href="/docs/assets/linuxDirectoryStructure.html-f9efb385.js" as="script"><link rel="prefetch" href="/docs/assets/linuxDiskManage.html-742517b9.js" as="script"><link rel="prefetch" href="/docs/assets/linuxFileBaseAttribute.html-c1bb572b.js" as="script"><link rel="prefetch" href="/docs/assets/linuxInstall.html-7512f294.js" as="script"><link rel="prefetch" href="/docs/assets/linuxStartProcess.html-350454e2.js" as="script"><link rel="prefetch" href="/docs/assets/linuxUserAndGroup.html-af206990.js" as="script"><link rel="prefetch" href="/docs/assets/linuxViVim.html-e744f9bb.js" as="script"><link rel="prefetch" href="/docs/assets/linuxYumApt.html-53ee1624.js" as="script"><link rel="prefetch" href="/docs/assets/shell.html-be29f81d.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-132b3cd0.js" as="script"><link rel="prefetch" href="/docs/assets/nginxAntiTheft.html-aae89cb3.js" as="script"><link rel="prefetch" href="/docs/assets/nginxBrotli.html-3b9d7a1f.js" as="script"><link rel="prefetch" href="/docs/assets/nginxConcatReq.html-5c33e17f.js" as="script"><link rel="prefetch" href="/docs/assets/nginxDynamicStatic.html-47951632.js" as="script"><link rel="prefetch" href="/docs/assets/nginxGZIP.html-8a6a15cd.js" as="script"><link rel="prefetch" href="/docs/assets/nginxInstall.html-279fe38e.js" as="script"><link rel="prefetch" href="/docs/assets/nginxRateLimit.html-cbdc1859.js" as="script"><link rel="prefetch" href="/docs/assets/nginxReverseProxy.html-3a7f374c.js" as="script"><link rel="prefetch" href="/docs/assets/nginxSSL.html-4183357f.js" as="script"><link rel="prefetch" href="/docs/assets/nginxServerLoadBalance.html-91b8055d.js" as="script"><link rel="prefetch" href="/docs/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-4ff34560.js" as="script"><link rel="prefetch" href="/docs/assets/logs.html-bfd3fd7e.js" as="script"><link rel="prefetch" href="/docs/assets/todo.html-a13a9c0a.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-42b22045.js" as="script"><link rel="prefetch" href="/docs/assets/demo.html-934acd26.js" as="script"><link rel="prefetch" href="/docs/assets/datapack.html-b1c86a1b.js" as="script"><link rel="prefetch" href="/docs/assets/fabric.html-1ab11091.js" as="script"><link rel="prefetch" href="/docs/assets/server.html-de49e6ee.js" as="script"><link rel="prefetch" href="/docs/assets/cli-node.html-97593b4c.js" as="script"><link rel="prefetch" href="/docs/assets/raspberryPi.html-de562f86.js" as="script"><link rel="prefetch" href="/docs/assets/http.html-6c41c9c1.js" as="script"><link rel="prefetch" href="/docs/assets/network.html-0e974b4c.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-82176a66.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-7b5ce77e.js" as="script"><link rel="prefetch" href="/docs/assets/jsFunc.html-7eb1b7f1.js" as="script"><link rel="prefetch" href="/docs/assets/jsUsed.html-2176c874.js" as="script"><link rel="prefetch" href="/docs/assets/jsValue.html-4284c75f.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-67d2b8e0.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-47906788.js" as="script"><link rel="prefetch" href="/docs/assets/sqlInstall.html-36b17d64.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-1411214a.js" as="script"><link rel="prefetch" href="/docs/assets/tsStart.html-c110c414.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-e900d034.js" as="script"><link rel="prefetch" href="/docs/assets/base.html-9a7ea789.js" as="script"><link rel="prefetch" href="/docs/assets/start.html-05b8667d.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-5a22bed4.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-e94e62fc.js" as="script"><link rel="prefetch" href="/docs/assets/Dockerfile.html-5dc867f1.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-95272062.js" as="script"><link rel="prefetch" href="/docs/assets/dockerCommand.html-0bf7b93d.js" as="script"><link rel="prefetch" href="/docs/assets/dockerCommonServers.html-4ac67fbb.js" as="script"><link rel="prefetch" href="/docs/assets/dockerCompose.html-224ce219.js" as="script"><link rel="prefetch" href="/docs/assets/dockerContainer.html-301cb3ec.js" as="script"><link rel="prefetch" href="/docs/assets/dockerDataPersistence.html-35b2c263.js" as="script"><link rel="prefetch" href="/docs/assets/dockerEngine.html-9660149a.js" as="script"><link rel="prefetch" href="/docs/assets/dockerImage.html-8446e2bf.js" as="script"><link rel="prefetch" href="/docs/assets/dockerNetwork.html-d166fb7c.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-217236b3.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-bbbe8e61.js" as="script"><link rel="prefetch" href="/docs/assets/forgot.html-d7b84d78.js" as="script"><link rel="prefetch" href="/docs/assets/linuxDirectoryStructure.html-3b3e1421.js" as="script"><link rel="prefetch" href="/docs/assets/linuxDiskManage.html-ccec540a.js" as="script"><link rel="prefetch" href="/docs/assets/linuxFileBaseAttribute.html-cd9475fe.js" as="script"><link rel="prefetch" href="/docs/assets/linuxInstall.html-ec1d53a4.js" as="script"><link rel="prefetch" href="/docs/assets/linuxStartProcess.html-3c603cd1.js" as="script"><link rel="prefetch" href="/docs/assets/linuxUserAndGroup.html-6f783146.js" as="script"><link rel="prefetch" href="/docs/assets/linuxViVim.html-367d2289.js" as="script"><link rel="prefetch" href="/docs/assets/linuxYumApt.html-b6e7fd47.js" as="script"><link rel="prefetch" href="/docs/assets/shell.html-4c358f3f.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-a1f83a0f.js" as="script"><link rel="prefetch" href="/docs/assets/nginxAntiTheft.html-1a0d258e.js" as="script"><link rel="prefetch" href="/docs/assets/nginxBrotli.html-36b90b83.js" as="script"><link rel="prefetch" href="/docs/assets/nginxConcatReq.html-92b5db91.js" as="script"><link rel="prefetch" href="/docs/assets/nginxDynamicStatic.html-9c09d313.js" as="script"><link rel="prefetch" href="/docs/assets/nginxGZIP.html-48edcd55.js" as="script"><link rel="prefetch" href="/docs/assets/nginxInstall.html-62f8e08f.js" as="script"><link rel="prefetch" href="/docs/assets/nginxRateLimit.html-5b887d4f.js" as="script"><link rel="prefetch" href="/docs/assets/nginxReverseProxy.html-58942a6e.js" as="script"><link rel="prefetch" href="/docs/assets/nginxSSL.html-b11bc3b7.js" as="script"><link rel="prefetch" href="/docs/assets/nginxServerLoadBalance.html-4f56f134.js" as="script"><link rel="prefetch" href="/docs/assets/404.html-f045dea5.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/docs/" class=""><!----><span class="site-name can-hide">Ilee-Docs</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/docs/guide/" class="" aria-label="看招"><!--[--><!--]--> 看招 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="技术类"><span class="title">技术类</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="技术类"><span class="title">技术类</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Dev</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/docs/group/dev/java/" class="" aria-label="Java"><!--[--><!--]--> Java <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/docs/group/dev/javascript/" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/docs/group/dev/sql/" class="" aria-label="Sql"><!--[--><!--]--> Sql <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Ops</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/docs/group/ops/linux/" class="" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/docs/group/ops/nginx/" class="" aria-label="Nginx"><!--[--><!--]--> Nginx <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/docs/group/ops/docker/" class="" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Framework</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/docs/group/fw/spring/" class="" aria-label="Spring"><!--[--><!--]--> Spring <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/docs/group/fw/react/" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="游戏类"><span class="title">游戏类</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="游戏类"><span class="title">游戏类</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Minecraft</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/docs/game/mc/datapack.md" class="" aria-label="DataPack数据包"><!--[--><!--]--> DataPack数据包 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/docs/game/mc/fabric.md" class="" aria-label="Fabric模组开发"><!--[--><!--]--> Fabric模组开发 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/docs/game/mc/server.md" class="" aria-label="Server服务器"><!--[--><!--]--> Server服务器 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="关于文档"><span class="title">关于文档</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="关于文档"><span class="title">关于文档</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/docs/about/logs.md" class="" aria-label="更新日志"><!--[--><!--]--> 更新日志 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/about/todo.md" class="" aria-label="TODO"><!--[--><!--]--> TODO <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/docs/guide/" class="" aria-label="看招"><!--[--><!--]--> 看招 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="技术类"><span class="title">技术类</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="技术类"><span class="title">技术类</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Dev</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/docs/group/dev/java/" class="" aria-label="Java"><!--[--><!--]--> Java <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/docs/group/dev/javascript/" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/docs/group/dev/sql/" class="" aria-label="Sql"><!--[--><!--]--> Sql <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Ops</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/docs/group/ops/linux/" class="" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/docs/group/ops/nginx/" class="" aria-label="Nginx"><!--[--><!--]--> Nginx <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/docs/group/ops/docker/" class="" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Framework</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/docs/group/fw/spring/" class="" aria-label="Spring"><!--[--><!--]--> Spring <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/docs/group/fw/react/" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="游戏类"><span class="title">游戏类</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="游戏类"><span class="title">游戏类</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Minecraft</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/docs/game/mc/datapack.md" class="" aria-label="DataPack数据包"><!--[--><!--]--> DataPack数据包 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/docs/game/mc/fabric.md" class="" aria-label="Fabric模组开发"><!--[--><!--]--> Fabric模组开发 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/docs/game/mc/server.md" class="" aria-label="Server服务器"><!--[--><!--]--> Server服务器 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="关于文档"><span class="title">关于文档</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="关于文档"><span class="title">关于文档</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/docs/about/logs.md" class="" aria-label="更新日志"><!--[--><!--]--> 更新日志 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/about/todo.md" class="" aria-label="TODO"><!--[--><!--]--> TODO <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Dev <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item collapsible">Java <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/docs/group/dev/java/" class="sidebar-item" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">JavaScript <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/docs/group/dev/javascript/" class="sidebar-item" aria-label="简介"><!--[--><!--]--> 简介 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/dev/javascript/jsUsed.html" class="sidebar-item" aria-label="使用"><!--[--><!--]--> 使用 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/dev/javascript/jsValue.html" class="sidebar-item" aria-label="值与变量"><!--[--><!--]--> 值与变量 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">Node <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/docs/group/dev/node/" class="sidebar-item" aria-label="Node 简介"><!--[--><!--]--> Node 简介 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">Sql <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/docs/group/dev/sql/" class="sidebar-item" aria-label="简介"><!--[--><!--]--> 简介 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">TypeScript <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/docs/group/dev/typescript/" class="sidebar-item" aria-label="简介"><!--[--><!--]--> 简介 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/dev/typescript/tsStart.html" class="sidebar-item" aria-label="ababa"><!--[--><!--]--> ababa <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Ops <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item collapsible">Linux <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/docs/group/ops/linux/" class="sidebar-item" aria-label="简介"><!--[--><!--]--> 简介 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/linux/linuxInstall.html" class="sidebar-item" aria-label="安装"><!--[--><!--]--> 安装 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/linux/linuxStartProcess.html" class="sidebar-item" aria-label="启动过程"><!--[--><!--]--> 启动过程 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/linux/linuxDirectoryStructure.html" class="sidebar-item" aria-label="目录结构"><!--[--><!--]--> 目录结构 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/linux/linuxFileBaseAttribute.html" class="sidebar-item" aria-label="文件基本属性与管理"><!--[--><!--]--> 文件基本属性与管理 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/linux/linuxUserAndGroup.html" class="sidebar-item" aria-label="用户和用户组管理"><!--[--><!--]--> 用户和用户组管理 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/linux/linuxDiskManage.html" class="sidebar-item" aria-label="磁盘管理"><!--[--><!--]--> 磁盘管理 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/linux/linuxViVim.html" class="sidebar-item" aria-label="Vi/Vim"><!--[--><!--]--> Vi/Vim <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/linux/linuxYumApt.html" class="sidebar-item" aria-label="Yum/Apt"><!--[--><!--]--> Yum/Apt <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/linux/forgot.html" class="sidebar-item" aria-label="忘了"><!--[--><!--]--> 忘了 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/linux/shell.html" class="sidebar-item" aria-label="Shell"><!--[--><!--]--> Shell <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">Nginx <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/docs/group/ops/nginx/" class="sidebar-item" aria-label="简介"><!--[--><!--]--> 简介 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/nginx/nginxInstall.html" class="sidebar-item" aria-label="安装"><!--[--><!--]--> 安装 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/nginx/nginxAntiTheft.html" class="sidebar-item" aria-label="防盗链"><!--[--><!--]--> 防盗链 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/nginx/nginxGZIP.html" class="sidebar-item" aria-label="GZIP压缩"><!--[--><!--]--> GZIP压缩 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/nginx/nginxBrotli.html" class="sidebar-item" aria-label="Brotli压缩"><!--[--><!--]--> Brotli压缩 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/nginx/nginxReverseProxy.html" class="sidebar-item" aria-label="反向代理"><!--[--><!--]--> 反向代理 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/nginx/nginxSSL.html" class="sidebar-item" aria-label="SSL"><!--[--><!--]--> SSL <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/nginx/nginxServerLoadBalance.html" class="sidebar-item" aria-label="负载均衡"><!--[--><!--]--> 负载均衡 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/nginx/nginxDynamicStatic.html" class="sidebar-item" aria-label="动静分离"><!--[--><!--]--> 动静分离 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/nginx/nginxConcatReq.html" class="sidebar-item" aria-label="合并请求"><!--[--><!--]--> 合并请求 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/nginx/nginxRateLimit.html" class="sidebar-item" aria-label="限流"><!--[--><!--]--> 限流 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">Docker <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/docs/group/ops/docker/" class="sidebar-item" aria-label="概述"><!--[--><!--]--> 概述 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/docker/dockerEngine.html" class="sidebar-item" aria-label="引擎"><!--[--><!--]--> 引擎 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/docker/dockerImage.html" class="sidebar-item" aria-label="镜像"><!--[--><!--]--> 镜像 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/docker/dockerContainer.html" class="sidebar-item" aria-label="容器"><!--[--><!--]--> 容器 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/docker/dockerCommand.html" class="sidebar-item" aria-label="命令"><!--[--><!--]--> 命令 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/docker/Dockerfile.html" class="sidebar-item" aria-label="Dockerfile"><!--[--><!--]--> Dockerfile <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/docker/dockerDataPersistence.html" class="sidebar-item" aria-label="数据持久化"><!--[--><!--]--> 数据持久化 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/docker/dockerNetwork.html" class="sidebar-item" aria-label="网络"><!--[--><!--]--> 网络 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/docker/dockerCompose.html" class="sidebar-item" aria-label="Compose"><!--[--><!--]--> Compose <!--[--><!--]--></a><!----></li><li><a href="/docs/group/ops/docker/dockerCommonServers.html" class="sidebar-item" aria-label="常用服务器安装"><!--[--><!--]--> 常用服务器安装 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">Git <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/docs/group/ops/git/" class="sidebar-item" aria-label="又tm忘了"><!--[--><!--]--> 又tm忘了 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">Anaconda <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/docs/group/ops/anaconda/" class="sidebar-item" aria-label="Anaconda"><!--[--><!--]--> Anaconda <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Framework <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item">Spring <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/group/fw/spring/" class="sidebar-item" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">React <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/group/fw/react/" class="sidebar-item" aria-label="简介"><!--[--><!--]--> 简介 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/fw/react/start.html" class="sidebar-item" aria-label="开始"><!--[--><!--]--> 开始 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/fw/react/base.html" class="sidebar-item" aria-label="基础"><!--[--><!--]--> 基础 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Protocol <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item">HTTP/HTTPS <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/group/protocol/http.html" class="sidebar-item" aria-label="HTTP 协议"><!--[--><!--]--> HTTP 协议 <!--[--><!--]--></a><!----></li><li><a href="/docs/group/protocol/network.html" class="sidebar-item" aria-label="Network"><!--[--><!--]--> Network <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">other? <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item">CLI <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/group/other/cli-node.html" class="sidebar-item" aria-label="CLI Node"><!--[--><!--]--> CLI Node <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">Embedded <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/group/other/raspberryPi.html" class="sidebar-item" aria-label="Raspberry Pi"><!--[--><!--]--> Raspberry Pi <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item active">安卓开机自启-rk356x <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/docs/group/other/android-rk356x.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Modify"><!--[--><!--]--> Modify <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#_0116" class="router-link-active router-link-exact-active sidebar-item" aria-label="0116"><!--[--><!--]--> 0116 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#修改内容" class="router-link-active router-link-exact-active sidebar-item" aria-label="修改内容"><!--[--><!--]--> 修改内容 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#编译结果" class="router-link-active router-link-exact-active sidebar-item" aria-label="编译结果"><!--[--><!--]--> 编译结果 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#_0116v2" class="router-link-active router-link-exact-active sidebar-item" aria-label="0116v2"><!--[--><!--]--> 0116v2 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#修改内容-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="修改内容"><!--[--><!--]--> 修改内容 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#编译结果-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="编译结果"><!--[--><!--]--> 编译结果 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#_0116v3" class="router-link-active router-link-exact-active sidebar-item" aria-label="0116v3"><!--[--><!--]--> 0116v3 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#修改内容-2" class="router-link-active router-link-exact-active sidebar-item" aria-label="修改内容"><!--[--><!--]--> 修改内容 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#编译结果-2" class="router-link-active router-link-exact-active sidebar-item" aria-label="编译结果"><!--[--><!--]--> 编译结果 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#_0116v4" class="router-link-active router-link-exact-active sidebar-item" aria-label="0116v4"><!--[--><!--]--> 0116v4 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#修改内容-3" class="router-link-active router-link-exact-active sidebar-item" aria-label="修改内容"><!--[--><!--]--> 修改内容 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#编译结果-3" class="router-link-active router-link-exact-active sidebar-item" aria-label="编译结果"><!--[--><!--]--> 编译结果 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#_0116v4-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="0116v4"><!--[--><!--]--> 0116v4 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#修改内容-4" class="router-link-active router-link-exact-active sidebar-item" aria-label="修改内容"><!--[--><!--]--> 修改内容 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#编译结果-4" class="router-link-active router-link-exact-active sidebar-item" aria-label="编译结果"><!--[--><!--]--> 编译结果 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#_0117v2" class="router-link-active router-link-exact-active sidebar-item" aria-label="0117v2"><!--[--><!--]--> 0117v2 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#修改内容-5" class="router-link-active router-link-exact-active sidebar-item" aria-label="修改内容"><!--[--><!--]--> 修改内容 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#编译结果-5" class="router-link-active router-link-exact-active sidebar-item" aria-label="编译结果"><!--[--><!--]--> 编译结果 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#_0117v3" class="router-link-active router-link-exact-active sidebar-item" aria-label="0117v3"><!--[--><!--]--> 0117v3 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#修改内容-6" class="router-link-active router-link-exact-active sidebar-item" aria-label="修改内容"><!--[--><!--]--> 修改内容 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#编译结果-6" class="router-link-active router-link-exact-active sidebar-item" aria-label="编译结果"><!--[--><!--]--> 编译结果 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#_0117v4" class="router-link-active router-link-exact-active sidebar-item" aria-label="0117v4"><!--[--><!--]--> 0117v4 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#修改内容-7" class="router-link-active router-link-exact-active sidebar-item" aria-label="修改内容"><!--[--><!--]--> 修改内容 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#编译结果-7" class="router-link-active router-link-exact-active sidebar-item" aria-label="编译结果"><!--[--><!--]--> 编译结果 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#_0117v4-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="0117v4"><!--[--><!--]--> 0117v4 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#修改内容-8" class="router-link-active router-link-exact-active sidebar-item" aria-label="修改内容"><!--[--><!--]--> 修改内容 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#编译结果-8" class="router-link-active router-link-exact-active sidebar-item" aria-label="编译结果"><!--[--><!--]--> 编译结果 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#_0120v1" class="router-link-active router-link-exact-active sidebar-item" aria-label="0120v1"><!--[--><!--]--> 0120v1 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#修改内容-9" class="router-link-active router-link-exact-active sidebar-item" aria-label="修改内容"><!--[--><!--]--> 修改内容 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#编译结果-9" class="router-link-active router-link-exact-active sidebar-item" aria-label="编译结果"><!--[--><!--]--> 编译结果 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#_0120v2" class="router-link-active router-link-exact-active sidebar-item" aria-label="0120v2"><!--[--><!--]--> 0120v2 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#修改内容-10" class="router-link-active router-link-exact-active sidebar-item" aria-label="修改内容"><!--[--><!--]--> 修改内容 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#编译结果-10" class="router-link-active router-link-exact-active sidebar-item" aria-label="编译结果"><!--[--><!--]--> 编译结果 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#添加" class="router-link-active router-link-exact-active sidebar-item" aria-label="添加"><!--[--><!--]--> 添加 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#修改内容-11" class="router-link-active router-link-exact-active sidebar-item" aria-label="修改内容"><!--[--><!--]--> 修改内容 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#添加-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="添加"><!--[--><!--]--> 添加 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#添加-2" class="router-link-active router-link-exact-active sidebar-item" aria-label="添加"><!--[--><!--]--> 添加 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/docs/group/other/android-rk356x.html#参考资料" class="router-link-active router-link-exact-active sidebar-item" aria-label="参考资料"><!--[--><!--]--> 参考资料 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="modify" tabindex="-1"><a class="header-anchor" href="#modify" aria-hidden="true">#</a> Modify</h1><p>Android 源码编辑</p><ul><li>自启动</li><li>白名单</li><li>应用内置</li><li>隐藏导航栏</li></ul><h2 id="_0116" tabindex="-1"><a class="header-anchor" href="#_0116" aria-hidden="true">#</a> 0116</h2><h3 id="修改内容" tabindex="-1"><a class="header-anchor" href="#修改内容" aria-hidden="true">#</a> 修改内容</h3><ol><li>添加启动代码到<code>frameworks/base/services/java/com/android/server/SystemServer.java</code>的<code>startOtherServices()</code>方法中</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// 系统服务启动完成后，添加以下代码</span>
<span class="token comment">// ilee modify here --start</span>
<span class="token class-name">String</span> kioskPackage <span class="token operator">=</span> <span class="token string">&quot;dji.go.v5&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 第三方应用包名</span>
<span class="token class-name">PackageManager</span> pm <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getPackageManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Intent</span> intent <span class="token operator">=</span> pm<span class="token punctuation">.</span><span class="token function">getLaunchIntentForPackage</span><span class="token punctuation">(</span>kioskPackage<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>intent <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    intent<span class="token punctuation">.</span><span class="token function">addFlags</span><span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">FLAG_ACTIVITY_NEW_TASK</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// add app to kiosk mod</span>
    <span class="token class-name">ActivityManager</span> am <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ActivityManager</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getSystemService</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span><span class="token constant">ACTIVITY_SERVICE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">boolean</span> isInLockTask <span class="token operator">=</span> am<span class="token punctuation">.</span><span class="token function">getLockTaskModeState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token class-name">ActivityManager</span><span class="token punctuation">.</span><span class="token constant">LOCK_TASK_MODE_NONE</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isInLockTask<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">startLockTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// ilee modify here --end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>将应用添加到白名单<code>frameworks/base/core/res/res/values/config.xml</code>中添加</li></ol><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string-array</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lock_task_packages<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span><span class="token punctuation">&gt;</span></span>com.example.thirdpartyapp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string-array</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>在<code>device\rockchip\rk356x\rk3566_tspi\rk3566_tspi.mk</code>中添加属性<code>persist.sys.def_launherpag</code><strong>rk3566_tspi.mk</strong></li></ol><div class="language-mk line-numbers-mode" data-ext="mk"><pre class="language-mk"><code>PRODUCT_PROPERTY_OVERRIDES += persist.sys.def_launherpag=dji.go.v5

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>添加应用到<code>device\rockchip\rk356x\rk3566_tspi\preinstall\</code> ,我就直接把应用<code>DJIFly.apk</code>丢进<code>preinstall</code>中</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>DJIFly
 |-- DJIFly.apk
 |-- Android.mk
 |-- lib
Android.mk
preinstall.mk
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Android.mk</strong></p><div class="language-Android.mk line-numbers-mode" data-ext="Android.mk"><pre class="language-Android.mk"><code>include $(call all-subdir-makefiles)


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>preinstall.mk</strong></p><div class="language-preinstall.mk line-numbers-mode" data-ext="preinstall.mk"><pre class="language-preinstall.mk"><code>PRODUCT_PACKAGES += DJIFly

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>修改底部导航栏功能并隐藏</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code></code></pre><div class="line-numbers" aria-hidden="true"></div></div><h3 id="编译结果" tabindex="-1"><a class="header-anchor" href="#编译结果" aria-hidden="true">#</a> 编译结果</h3><p>编译失败</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>warning: some JAR files in the classpath have the Kotlin Runtime library bundled into them. This may cause difficult to debug problems if there&#39;s a different version of the Kotlin Runtime library in the classpath. Consider removing these libraries from the classpath
out/soong/.intermediates/frameworks/base/packages/SettingsLib/SettingsLib/android_common/turbine-combined/SettingsLib.jar: warning: library has Kotlin runtime bundled into it
out/soong/.intermediates/prebuilts/tools/common/m2/kotlinx-coroutines-core/android_common/turbine-combined/kotlinx-coroutines-core.jar: warning: library has Kotlin runtime bundled into it
frameworks/base/packages/SystemUI/src/com/android/systemui/controls/management/ControlsEditingActivity.kt:142:13: warning: variable &#39;rootView&#39; is never used
        val rootView = requireViewById&lt;ViewGroup&gt;(R.id.controls_management_root)
            ^
frameworks/base/packages/SystemUI/src/com/android/systemui/controls/management/ControlsModel.kt:117:28: warning: parameter &#39;_a&#39; is never used
private fun nullIconGetter(_a: ComponentName, _b: String): Icon? = null
                           ^
frameworks/base/packages/SystemUI/src/com/android/systemui/controls/management/ControlsModel.kt:117:47: warning: parameter &#39;_b&#39; is never used
private fun nullIconGetter(_a: ComponentName, _b: String): Icon? = null
                                              ^
frameworks/base/packages/SystemUI/src/com/android/systemui/controls/management/FavoritesModel.kt:223:35: warning: &#39;getter for adapterPosition: Int&#39; is deprecated. Deprecated in Java
            onMoveItem(viewHolder.adapterPosition, target.adapterPosition)
                                  ^
frameworks/base/packages/SystemUI/src/com/android/systemui/controls/management/FavoritesModel.kt:223:59: warning: &#39;getter for adapterPosition: Int&#39; is deprecated. Deprecated in Java
            onMoveItem(viewHolder.adapterPosition, target.adapterPosition)
                                                          ^
frameworks/base/packages/SystemUI/src/com/android/systemui/controls/management/FavoritesModel.kt:231:28: warning: &#39;getter for adapterPosition: Int&#39; is deprecated. Deprecated in Java
            if (viewHolder.adapterPosition &lt; dividerPosition) {
                           ^
frameworks/base/packages/SystemUI/src/com/android/systemui/controls/management/FavoritesModel.kt:243:27: warning: &#39;getter for adapterPosition: Int&#39; is deprecated. Deprecated in Java
            return target.adapterPosition &lt; dividerPosition
                          ^
frameworks/base/packages/SystemUI/src/com/android/systemui/controls/ui/ControlViewHolder.kt:243:72: warning: unnecessary non-null assertion (!!) on a non-null receiver of type Behavior
        val behavior = if (existingBehavior == null || existingBehavior!!::class != clazz) {
                                                                       ^
frameworks/base/packages/SystemUI/src/com/android/systemui/controls/ui/ControlsUiControllerImpl.kt:200:33: warning: parameter &#39;items&#39; is never used
    private fun showSeedingView(items: List&lt;SelectionItem&gt;) {
                                ^
frameworks/base/packages/SystemUI/src/com/android/systemui/media/MediaDataFilter.kt:96:37: warning: parameter &#39;id&#39; is never used
    internal fun handleUserSwitched(id: Int) {
                                    ^
frameworks/base/packages/SystemUI/src/com/android/systemui/media/MediaDataManager.kt:496:62: warning: elvis operator (?:) always returns the left operand of non-nullable type Int
            MediaController.PlaybackInfo.PLAYBACK_TYPE_LOCAL ?: true
                                                             ^
frameworks/base/packages/SystemUI/src/com/android/systemui/media/MediaDataManager.kt:497:89: warning: right operand of elvis operator (?:) is useless if it is null
        val isPlaying = mediaController.playbackState?.let { isPlayingState(it.state) } ?: null
                                                                                        ^
frameworks/base/packages/SystemUI/src/com/android/systemui/media/MediaDataManager.kt:549:26: warning: parameter &#39;info&#39; is never used, could be renamed to _
                decoder, info, source -&gt; decoder.isMutableRequired = true
                         ^
frameworks/base/packages/SystemUI/src/com/android/systemui/media/MediaDataManager.kt:549:32: warning: name shadowed: source
                decoder, info, source -&gt; decoder.isMutableRequired = true
                               ^
frameworks/base/packages/SystemUI/src/com/android/systemui/media/MediaDataManager.kt:549:32: warning: parameter &#39;source&#39; is never used, could be renamed to _
                decoder, info, source -&gt; decoder.isMutableRequired = true
                               ^
frameworks/base/packages/SystemUI/src/com/android/systemui/media/MediaDataManager.kt:614:30: warning: unnecessary safe call on a non-null receiver of type MediaData?
            val pkg = removed?.packageName
                             ^
frameworks/base/packages/SystemUI/src/com/android/systemui/media/MediaDeviceManager.kt:72:35: warning: unnecessary safe call on a non-null receiver of type MediaDeviceManager.Entry?
        if (entry == null || entry?.token != data.token) {
                                  ^
frameworks/base/packages/SystemUI/src/com/android/systemui/media/MediaDeviceManager.kt:160:18: warning: parameter &#39;fd&#39; is never used
        fun dump(fd: FileDescriptor, pw: PrintWriter, args: Array&lt;String&gt;) {
                 ^
frameworks/base/packages/SystemUI/src/com/android/systemui/media/MediaDeviceManager.kt:160:55: warning: parameter &#39;args&#39; is never used
        fun dump(fd: FileDescriptor, pw: PrintWriter, args: Array&lt;String&gt;) {
                                                      ^
frameworks/base/packages/SystemUI/src/com/android/systemui/media/MediaResumeListener.kt:170:57: warning: unnecessary non-null assertion (!!) on a non-null receiver of type List&lt;ResolveInfo!&gt;
                        tryUpdateResumptionList(key, inf!!.get(0).componentInfo.componentName)
                                                        ^
frameworks/base/packages/SystemUI/src/com/android/systemui/media/MediaSessionBasedFilter.kt:94:66: warning: the corresponding parameter in the supertype &#39;Listener&#39; is named &#39;data&#39;. This may cause problems when calling this function with named arguments.
    override fun onMediaDataLoaded(key: String, oldKey: String?, info: MediaData) {
                                                                 ^
frameworks/base/packages/SystemUI/src/com/android/systemui/media/MediaSessionBasedFilter.kt:126:83: warning: unnecessary safe call on a non-null receiver of type MediaController?
                Log.d(TAG, &quot;filtering key=$key local=${info.token} remote=${remote?.sessionToken}&quot;)
                                                                                  ^
frameworks/base/packages/SystemUI/src/com/android/systemui/media/SeekBarObserver.kt:64:22: warning: unnecessary safe call on a non-null receiver of type Int
        data.duration?.let {
                     ^
frameworks/base/packages/SystemUI/src/com/android/systemui/media/SeekBarViewModel.kt:224:39: warning: elvis operator (?:) always returns the left operand of non-nullable type Int
        val duration = _data.duration ?: -1
                                      ^
frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/notification/collection/NotifViewManager.kt:200:14: warning: parameter &#39;fd&#39; is never used
    fun dump(fd: FileDescriptor, pw: PrintWriter, args: Array&lt;String&gt;) {
             ^
frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/notification/collection/NotifViewManager.kt:200:34: warning: parameter &#39;pw&#39; is never used
    fun dump(fd: FileDescriptor, pw: PrintWriter, args: Array&lt;String&gt;) {
                                 ^
frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/notification/collection/NotifViewManager.kt:200:51: warning: parameter &#39;args&#39; is never used
    fun dump(fd: FileDescriptor, pw: PrintWriter, args: Array&lt;String&gt;) {
                                                  ^
frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/notification/collection/notifcollection/NotifEvent.kt:95:18: warning: &#39;onRankingUpdate(NotificationListenerService.RankingMap!): Unit&#39; is deprecated. Deprecated in Java
        listener.onRankingUpdate(rankingMap)
                 ^
frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/notification/people/PeopleNotificationIdentifier.kt:73:31: warning: name shadowed: type
                    when (val type = upperBound(type, extractPersonTypeInfo(sbn))) {
                              ^
frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/notification/row/PriorityOnboardingDialogController.kt:89:44: warning: unnecessary safe call on a non-null receiver of type NotificationConversationInfo.OnConversationSettingsClickListener
        onConversationSettingsClickListener?.onClick()
                                           ^
frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/notification/row/PriorityOnboardingDialogController.kt:176:22: warning: &#39;getColor(Int): Int&#39; is deprecated. Deprecated in Java
                    .getColor(com.android.internal.R.color.conversation_important_highlight)
                     ^
frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/notification/row/PriorityOnboardingDialogController.kt:184:17: warning: variable &#39;largeSize&#39; is never used
            val largeSize = baseSize + largeThickness * 2
                ^
frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/notification/stack/ForegroundServiceSectionController.kt:74:9: warning: parameter &#39;key&#39; is never used
        key: String,
        ^
frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/notification/stack/ForegroundServiceSectionController.kt:81:13: warning: variable &#39;isAppCancel&#39; is never used
        val isAppCancel = reason == REASON_APP_CANCEL || reason == REASON_APP_CANCEL_ALL
            ^
frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/notification/stack/NotificationSectionsManager.kt:137:75: warning: unchecked cast: View! to T
        val inflated = layoutInflater.inflate(layoutResId, parent, false) as T
                                                                          ^
frameworks/base/packages/SystemUI/src/com/android/systemui/util/RelativeTouchListener.kt:93:27: warning: &#39;constructor Handler()&#39; is deprecated. Deprecated in Java
    private val handler = Handler()
                          ^
frameworks/base/packages/SystemUI/src/com/android/systemui/util/magnetictarget/MagnetizedObject.kt:465:22: warning: &#39;vibrate(Long): Unit&#39; is deprecated. Deprecated in Java
            vibrator.vibrate(effect.toLong())
                     ^
14:20:26 ninja failed with: exit status 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>错误原因未知</p><h2 id="_0116v2" tabindex="-1"><a class="header-anchor" href="#_0116v2" aria-hidden="true">#</a> 0116v2</h2><h3 id="修改内容-1" tabindex="-1"><a class="header-anchor" href="#修改内容-1" aria-hidden="true">#</a> 修改内容</h3><ol><li>==0116 <ul><li>自启动</li></ul></li><li>修改位于<code>frameworks\base\services\devicepolicy\java\com\android\server\devicepolicy</code>的<code>DevicePolicyManagerService.java</code>，在<code>setLockTaskPackages</code>方法中添加如下代码 <ul><li>白名单</li></ul></li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// ilee modify here --start</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> lockTaskPackages <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>packages<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
lockTaskPackages<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;dji.go.v5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ilee modify here --end</span>

<span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token function">getLockObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">enforceCanCallLockTaskLocked</span><span class="token punctuation">(</span>who<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> userHandle <span class="token operator">=</span> mInjector<span class="token punctuation">.</span><span class="token function">userHandleGetCallingUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ilee modify here --start</span>
    <span class="token function">setLockTaskPackagesLocked</span><span class="token punctuation">(</span>userHandle<span class="token punctuation">,</span> lockTaskPackages<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ilee modify here --end</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>==0116</li><li>==0116</li><li>==0116</li></ol><h3 id="编译结果-1" tabindex="-1"><a class="header-anchor" href="#编译结果-1" aria-hidden="true">#</a> 编译结果</h3><h2 id="_0116v3" tabindex="-1"><a class="header-anchor" href="#_0116v3" aria-hidden="true">#</a> 0116v3</h2><h3 id="修改内容-2" tabindex="-1"><a class="header-anchor" href="#修改内容-2" aria-hidden="true">#</a> 修改内容</h3><ol><li>==0116</li><li>修改位于<code>frameworks\base\services\core\java\com\android\server\wm</code>的<code>LockTaskController.java</code>，在<code>LockTaskController</code>方法中添加如下代码</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// ilee modify here --start</span>
mLockTaskPackages<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">UserHandle</span><span class="token punctuation">.</span><span class="token constant">USER_SYSTEM</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
        <span class="token string">&quot;dji.go.v5&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ilee modify here --end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>==0116</li><li>==0116</li><li>==0116</li></ol><h3 id="编译结果-2" tabindex="-1"><a class="header-anchor" href="#编译结果-2" aria-hidden="true">#</a> 编译结果</h3><h2 id="_0116v4" tabindex="-1"><a class="header-anchor" href="#_0116v4" aria-hidden="true">#</a> 0116v4</h2><p>failed</p><h3 id="修改内容-3" tabindex="-1"><a class="header-anchor" href="#修改内容-3" aria-hidden="true">#</a> 修改内容</h3><ol><li>修改来自<code>frameworks/base/packages/SystemUI/src/com/android/systemui</code>的<code>SystemUIService.java</code>文件 <ul><li>自启动 在构造函数中添加</li></ul></li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// ilee modify here --start</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">executeCMD</span><span class="token punctuation">(</span><span class="token string">&quot;su&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;appops set dji.go.v5 WRITE_SETTINGS allow&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">executeCMD</span><span class="token punctuation">(</span><span class="token string">&quot;su&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;appops set dji.go.v5 SYSTEM_ALERT_WINDOW allow&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">executeCMD</span><span class="token punctuation">(</span><span class="token string">&quot;su&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;appops set dji.go.v5 MANAGE_EXTERNAL_STORAGE allow&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">executeCMD</span><span class="token punctuation">(</span><span class="token string">&quot;su&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;pm grant dji.go.v5 android.permission.CAMERA&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">executeCMD</span><span class="token punctuation">(</span><span class="token string">&quot;su&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;pm grant dji.go.v5 android.permission.READ_PHONE_STATE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">executeCMD</span><span class="token punctuation">(</span><span class="token string">&quot;su&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;pm grant dji.go.v5 android.permission.WRITE_MEDIA_STORAGE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">executeCMD</span><span class="token punctuation">(</span><span class="token string">&quot;su&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;pm grant dji.go.v5 android.permission.ACCESS_FINE_LOCATION&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">executeCMD</span><span class="token punctuation">(</span><span class="token string">&quot;su&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;pm grant dji.go.v5 android.permission.RECORD_AUDIO&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">executeCMD</span><span class="token punctuation">(</span><span class="token string">&quot;su&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;pm grant dji.go.v5 android.permission.CALL_PHONE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">executeCMD</span><span class="token punctuation">(</span><span class="token string">&quot;su&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;pm grant dji.go.v5 android.permission.GET_ACCOUNTS&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">executeCMD</span><span class="token punctuation">(</span><span class="token string">&quot;su&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;pm grant dji.go.v5 android.permission.READ_EXTERNAL_STORAGE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">executeCMD</span><span class="token punctuation">(</span><span class="token string">&quot;su&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;pm grant dji.go.v5 android.permission.WRITE_EXTERNAL_STORAGE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">executeCMD</span><span class="token punctuation">(</span><span class="token string">&quot;su&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;pm grant dji.go.v5 android.permission.READ_MEDIA_AUDIO&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">executeCMD</span><span class="token punctuation">(</span><span class="token string">&quot;su&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;pm grant dji.go.v5 android.permission.READ_MEDIA_VIDEO&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">executeCMD</span><span class="token punctuation">(</span><span class="token string">&quot;su&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;pm grant dji.go.v5 android.permission.READ_MEDIA_IMAGES&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">executeCMD</span><span class="token punctuation">(</span><span class="token string">&quot;su&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;am start -n dji.go.v5/com.dji.component.application.activity.DJIPureLaunchActivity&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ilee modify here --end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><ul><li>白名单</li></ul></li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code></code></pre><div class="line-numbers" aria-hidden="true"></div></div><h3 id="编译结果-3" tabindex="-1"><a class="header-anchor" href="#编译结果-3" aria-hidden="true">#</a> 编译结果</h3><p>失败</p><h2 id="_0116v4-1" tabindex="-1"><a class="header-anchor" href="#_0116v4-1" aria-hidden="true">#</a> 0116v4</h2><h3 id="修改内容-4" tabindex="-1"><a class="header-anchor" href="#修改内容-4" aria-hidden="true">#</a> 修改内容</h3><ol><li>修改来自<code>frameworks/base/packages/SystemUI/src/com/android/systemui</code>的<code>SystemUIService.java</code>文件 <ul><li>自启动 在<code>onCreate</code>函数中添加</li></ul></li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// ilee modify here --start</span>
<span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> kioskPackage <span class="token operator">=</span> <span class="token string">&quot;dji.go.v5&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 第三方应用包名</span>
<span class="token class-name">PackageManager</span> pm <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getPackageManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Intent</span> intent <span class="token operator">=</span> pm<span class="token punctuation">.</span><span class="token function">getLaunchIntentForPackage</span><span class="token punctuation">(</span>kioskPackage<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>intent <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    intent<span class="token punctuation">.</span><span class="token function">addFlags</span><span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">FLAG_ACTIVITY_NEW_TASK</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ilee modify here --end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><ul><li>白名单</li></ul></li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code></code></pre><div class="line-numbers" aria-hidden="true"></div></div><h3 id="编译结果-4" tabindex="-1"><a class="header-anchor" href="#编译结果-4" aria-hidden="true">#</a> 编译结果</h3><h2 id="_0117v2" tabindex="-1"><a class="header-anchor" href="#_0117v2" aria-hidden="true">#</a> 0117v2</h2><ol><li>内置应用 work</li><li>自启动 work</li></ol><h3 id="修改内容-5" tabindex="-1"><a class="header-anchor" href="#修改内容-5" aria-hidden="true">#</a> 修改内容</h3><ol><li>添加启动代码到<code>frameworks/base/services/java/com/android/server/SystemServer.java</code>的<code>startOtherServices()</code>方法中</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// line 43</span>
<span class="token comment">// ilee modify here 1 line</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span><span class="token class-name">BroadcastReceiver</span></span><span class="token punctuation">;</span>

<span class="token comment">// 系统服务启动完成后，添加以下代码</span>
<span class="token comment">// line:2247</span>
<span class="token comment">// ilee modify here --start</span>
<span class="token function">registerBootCompletedReceiver</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ilee modify here --end</span>

<span class="token comment">// line 2497</span>
<span class="token comment">// ilee modify here --start</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">registerBootCompletedReceiver</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">IntentFilter</span> filter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntentFilter</span><span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">ACTION_BOOT_COMPLETED</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">registerReceiver</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BroadcastReceiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReceive</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token class-name">Intent</span> intent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">ACTION_BOOT_COMPLETED</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>intent<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">startKioskApp</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> filter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">startKioskApp</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> kioskPackage <span class="token operator">=</span> <span class="token string">&quot;dji.go.v5&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 第三方应用包名</span>
    <span class="token class-name">Intent</span> intent <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getPackageManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getLaunchIntentForPackage</span><span class="token punctuation">(</span>kioskPackage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>intent <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        intent<span class="token punctuation">.</span><span class="token function">addFlags</span><span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">FLAG_ACTIVITY_NEW_TASK</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// ilee modify here --end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>将应用添加到白名单<code>frameworks/base/core/res/res/values/config.xml</code>中添加</li></ol><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string-array</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lock_task_packages<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span><span class="token punctuation">&gt;</span></span>com.example.thirdpartyapp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string-array</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>在<code>device\rockchip\rk356x\rk3566_tspi\rk3566_tspi.mk</code>中添加属性<code>persist.sys.def_launherpag</code><strong>rk3566_tspi.mk</strong></li></ol><div class="language-mk line-numbers-mode" data-ext="mk"><pre class="language-mk"><code>PRODUCT_PROPERTY_OVERRIDES += persist.sys.def_launherpag=dji.go.v5

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>添加应用到<code>device\rockchip\rk356x\rk3566_tspi\preinstall\</code> ,我就直接把应用<code>DJIFly.apk</code>丢进<code>preinstall</code>中</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>DJIFly
 |-- DJIFly.apk
 |-- Android.mk
 |-- lib
Android.mk
preinstall.mk
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Android.mk</strong></p><div class="language-Android.mk line-numbers-mode" data-ext="Android.mk"><pre class="language-Android.mk"><code>include $(call all-subdir-makefiles)


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>preinstall.mk</strong></p><div class="language-preinstall.mk line-numbers-mode" data-ext="preinstall.mk"><pre class="language-preinstall.mk"><code>PRODUCT_PACKAGES += DJIFly

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>修改底部导航栏功能并隐藏</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code></code></pre><div class="line-numbers" aria-hidden="true"></div></div><h3 id="编译结果-5" tabindex="-1"><a class="header-anchor" href="#编译结果-5" aria-hidden="true">#</a> 编译结果</h3><h2 id="_0117v3" tabindex="-1"><a class="header-anchor" href="#_0117v3" aria-hidden="true">#</a> 0117v3</h2><h3 id="修改内容-6" tabindex="-1"><a class="header-anchor" href="#修改内容-6" aria-hidden="true">#</a> 修改内容</h3><ol><li>添加启动代码到<code>frameworks/base/services/java/com/android/server/SystemServer.java</code>的<code>startOtherServices()</code>方法中</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// line 43</span>
<span class="token comment">// ilee modify here 1 line</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span><span class="token class-name">BroadcastReceiver</span></span><span class="token punctuation">;</span>

<span class="token comment">// 系统服务启动完成后，添加以下代码</span>
<span class="token comment">// line:2247</span>
<span class="token comment">// ilee modify here --start</span>
<span class="token function">registerBootCompletedReceiver</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ilee modify here --end</span>

<span class="token comment">// line 2497</span>
<span class="token comment">// ilee modify here --start</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">registerBootCompletedReceiver</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">IntentFilter</span> filter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntentFilter</span><span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">ACTION_BOOT_COMPLETED</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">registerReceiver</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BroadcastReceiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReceive</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token class-name">Intent</span> intent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">ACTION_BOOT_COMPLETED</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>intent<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">startKioskApp</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> filter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">startKioskApp</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// kiosk mode</span>
    <span class="token class-name">ActivityOptions</span> options <span class="token operator">=</span> <span class="token class-name">ActivityOptions</span><span class="token punctuation">.</span><span class="token function">makeBasic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    options<span class="token punctuation">.</span><span class="token function">setLockTaskEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> kioskPackage <span class="token operator">=</span> <span class="token string">&quot;dji.go.v5&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 第三方应用包名</span>
    <span class="token class-name">Intent</span> intent <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getPackageManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getLaunchIntentForPackage</span><span class="token punctuation">(</span>kioskPackage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>intent <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        intent<span class="token punctuation">.</span><span class="token function">addFlags</span><span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">FLAG_ACTIVITY_NEW_TASK</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// modify to kiosk bundle</span>
        context<span class="token punctuation">.</span><span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">,</span> options<span class="token punctuation">.</span><span class="token function">toBundle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// ilee modify here --end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>将应用添加到白名单<code>frameworks/base/core/res/res/values/config.xml</code>中添加</li></ol><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string-array</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lock_task_packages<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span><span class="token punctuation">&gt;</span></span>com.example.thirdpartyapp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string-array</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>在<code>device\rockchip\rk356x\rk3566_tspi\rk3566_tspi.mk</code>中添加属性<code>persist.sys.def_launherpag</code><strong>rk3566_tspi.mk</strong></li></ol><div class="language-mk line-numbers-mode" data-ext="mk"><pre class="language-mk"><code>PRODUCT_PROPERTY_OVERRIDES += persist.sys.def_launherpag=dji.go.v5

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>添加应用到<code>device\rockchip\rk356x\rk3566_tspi\preinstall\</code> ,我就直接把应用<code>DJIFly.apk</code>丢进<code>preinstall</code>中</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>DJIFly
 |-- DJIFly.apk
 |-- Android.mk
 |-- lib
Android.mk
preinstall.mk
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Android.mk</strong></p><div class="language-Android.mk line-numbers-mode" data-ext="Android.mk"><pre class="language-Android.mk"><code>include $(call all-subdir-makefiles)


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>preinstall.mk</strong></p><div class="language-preinstall.mk line-numbers-mode" data-ext="preinstall.mk"><pre class="language-preinstall.mk"><code>PRODUCT_PACKAGES += DJIFly

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>修改底部导航栏功能并隐藏</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code></code></pre><div class="line-numbers" aria-hidden="true"></div></div><h3 id="编译结果-6" tabindex="-1"><a class="header-anchor" href="#编译结果-6" aria-hidden="true">#</a> 编译结果</h3><p>刷入固件，反复重启</p><h2 id="_0117v4" tabindex="-1"><a class="header-anchor" href="#_0117v4" aria-hidden="true">#</a> 0117v4</h2><ol><li>内置应用 work</li><li>自启动 work</li><li>logo修改</li><li>导航栏隐藏</li></ol><h3 id="修改内容-7" tabindex="-1"><a class="header-anchor" href="#修改内容-7" aria-hidden="true">#</a> 修改内容</h3><ol><li>添加启动代码到<code>frameworks/base/services/java/com/android/server/SystemServer.java</code>的<code>startOtherServices()</code>方法中</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// line 43</span>
<span class="token comment">// ilee modify here 1 line</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span><span class="token class-name">BroadcastReceiver</span></span><span class="token punctuation">;</span>

<span class="token comment">// 系统服务启动完成后，添加以下代码</span>
<span class="token comment">// line:2247</span>
<span class="token comment">// ilee modify here --start</span>
<span class="token function">registerBootCompletedReceiver</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ilee modify here --end</span>

<span class="token comment">// line 2497</span>
<span class="token comment">// ilee modify here --start</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">registerBootCompletedReceiver</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">IntentFilter</span> filter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntentFilter</span><span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">ACTION_BOOT_COMPLETED</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">registerReceiver</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BroadcastReceiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReceive</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token class-name">Intent</span> intent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">ACTION_BOOT_COMPLETED</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>intent<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">startKioskApp</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> filter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">startKioskApp</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> kioskPackage <span class="token operator">=</span> <span class="token string">&quot;dji.go.v5&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">Intent</span> intent <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getPackageManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getLaunchIntentForPackage</span><span class="token punctuation">(</span>kioskPackage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>intent <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        intent<span class="token punctuation">.</span><span class="token function">addFlags</span><span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">FLAG_ACTIVITY_NEW_TASK</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);</span>
        <span class="token comment">// boolean isInLockTask = am.getLockTaskModeState() != ActivityManager.LOCK_TASK_MODE_NONE;</span>
        <span class="token comment">// if (!isInLockTask) {</span>
        <span class="token comment">//     startLockTask();</span>
        <span class="token comment">// }</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// ilee modify here --end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>将应用添加到白名单<code>frameworks/base/core/res/res/values/config.xml</code>中添加</li></ol><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string-array</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lock_task_packages<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span><span class="token punctuation">&gt;</span></span>com.example.thirdpartyapp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string-array</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>在<code>device\rockchip\rk356x\rk3566_tspi\rk3566_tspi.mk</code>中添加属性<code>persist.sys.def_launherpag</code><strong>rk3566_tspi.mk</strong></li></ol><div class="language-mk line-numbers-mode" data-ext="mk"><pre class="language-mk"><code>PRODUCT_PROPERTY_OVERRIDES += persist.sys.def_launherpag=dji.go.v5

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>添加应用到<code>device\rockchip\rk356x\rk3566_tspi\preinstall\</code> ,我就直接把应用<code>DJIFly.apk</code>丢进<code>preinstall</code>中</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>DJIFly
 |-- DJIFly.apk
 |-- Android.mk
 |-- lib
Android.mk
preinstall.mk
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Android.mk</strong></p><div class="language-Android.mk line-numbers-mode" data-ext="Android.mk"><pre class="language-Android.mk"><code>include $(call all-subdir-makefiles)


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>preinstall.mk</strong></p><div class="language-preinstall.mk line-numbers-mode" data-ext="preinstall.mk"><pre class="language-preinstall.mk"><code>PRODUCT_PACKAGES += DJIFly

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>修改底部导航栏功能并隐藏 <strong>取消功能</strong> 修改位于<code>frameworks/base/services/core/java/com/android/server/policy</code>的<code>PhoneWindowManager.java</code>文件</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// ilee modify here --start</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">KEYCODE_BACK</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">KEYCODE_HOME</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">KEYCODE_APP_SWITCH</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ilee modify here --end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>隐藏导航栏</strong> 修改位于<code>frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/phone</code>的<code>NavigationBarView.java</code>文件</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// line:1213</span>
<span class="token comment">// ilee modify here --start</span>
<span class="token function">setSystemUiVisibility</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">SYSTEM_UI_FLAG_HIDE_NAVIGATION</span> <span class="token operator">|</span> <span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">SYSTEM_UI_FLAG_IMMERSIVE_STICKY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="编译结果-7" tabindex="-1"><a class="header-anchor" href="#编译结果-7" aria-hidden="true">#</a> 编译结果</h3><h2 id="_0117v4-1" tabindex="-1"><a class="header-anchor" href="#_0117v4-1" aria-hidden="true">#</a> 0117v4</h2><ol><li>内置应用 work</li><li>自启动 work</li><li>logo修改</li><li>导航栏隐藏</li></ol><h3 id="修改内容-8" tabindex="-1"><a class="header-anchor" href="#修改内容-8" aria-hidden="true">#</a> 修改内容</h3><ol><li>添加启动代码到<code>frameworks/base/services/java/com/android/server/SystemServer.java</code>的<code>startOtherServices()</code>方法中</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// line 43</span>
<span class="token comment">// ilee modify here 1 line</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span><span class="token class-name">BroadcastReceiver</span></span><span class="token punctuation">;</span>

<span class="token comment">// 系统服务启动完成后，添加以下代码</span>
<span class="token comment">// line:2247</span>
<span class="token comment">// ilee modify here --start</span>
<span class="token function">registerBootCompletedReceiver</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ilee modify here --end</span>

<span class="token comment">// line 2497</span>
<span class="token comment">// ilee modify here --start</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">registerBootCompletedReceiver</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">IntentFilter</span> filter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntentFilter</span><span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">ACTION_BOOT_COMPLETED</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">registerReceiver</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BroadcastReceiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReceive</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token class-name">Intent</span> intent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">ACTION_BOOT_COMPLETED</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>intent<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">startKioskApp</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> filter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">startKioskApp</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> kioskPackage <span class="token operator">=</span> <span class="token string">&quot;dji.go.v5&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">Intent</span> intent <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getPackageManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getLaunchIntentForPackage</span><span class="token punctuation">(</span>kioskPackage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>intent <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        intent<span class="token punctuation">.</span><span class="token function">addFlags</span><span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">FLAG_ACTIVITY_NEW_TASK</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// kiosk start</span>
        <span class="token keyword">int</span> taskId <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token class-name">ActivityManager</span> am <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ActivityManager</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getSystemService</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span><span class="token constant">ACTIVITY_SERVICE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ActivityManager<span class="token punctuation">.</span>AppTask</span><span class="token punctuation">&gt;</span></span> tasks <span class="token operator">=</span> am<span class="token punctuation">.</span><span class="token function">getAppTasks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>tasks <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ActivityManager<span class="token punctuation">.</span>AppTask</span> task <span class="token operator">:</span> tasks<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>task<span class="token punctuation">.</span><span class="token function">getTaskInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>topActivity <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> task<span class="token punctuation">.</span><span class="token function">getTaskInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>topActivity<span class="token punctuation">.</span><span class="token function">getPackageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>kioskPackage<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    taskId <span class="token operator">=</span> task<span class="token punctuation">.</span><span class="token function">getTaskInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>taskId<span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>taskId <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">ActivityTaskManager</span><span class="token punctuation">.</span><span class="token function">getService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startSystemLockTaskMode</span><span class="token punctuation">(</span>taskId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// kiosk end</span>
    <span class="token comment">//            boolean isInLockTask = am.getLockTaskModeState() != ActivityManager.LOCK_TASK_MODE_NONE;</span>
    <span class="token comment">//            if (!isInLockTask) {</span>
    <span class="token comment">//                startLockTask();</span>
    <span class="token comment">//            }</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// ilee modify here --end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>将应用添加到白名单<code>frameworks/base/core/res/res/values/config.xml</code>中添加</li></ol><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string-array</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lock_task_packages<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span><span class="token punctuation">&gt;</span></span>com.example.thirdpartyapp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string-array</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>在<code>device\rockchip\rk356x\rk3566_tspi\rk3566_tspi.mk</code>中添加属性<code>persist.sys.def_launherpag</code><strong>rk3566_tspi.mk</strong></li></ol><div class="language-mk line-numbers-mode" data-ext="mk"><pre class="language-mk"><code>PRODUCT_PROPERTY_OVERRIDES += persist.sys.def_launherpag=dji.go.v5

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>添加应用到<code>device\rockchip\rk356x\rk3566_tspi\preinstall\</code> ,我就直接把应用<code>DJIFly.apk</code>丢进<code>preinstall</code>中</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>DJIFly
 |-- DJIFly.apk
 |-- Android.mk
 |-- lib
Android.mk
preinstall.mk
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Android.mk</strong></p><div class="language-Android.mk line-numbers-mode" data-ext="Android.mk"><pre class="language-Android.mk"><code>include $(call all-subdir-makefiles)


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>preinstall.mk</strong></p><div class="language-preinstall.mk line-numbers-mode" data-ext="preinstall.mk"><pre class="language-preinstall.mk"><code>PRODUCT_PACKAGES += DJIFly

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>修改底部导航栏功能并隐藏 <strong>取消功能</strong> 修改位于<code>frameworks/base/services/core/java/com/android/server/policy</code>的<code>PhoneWindowManager.java</code>文件</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// ilee modify here --start</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">KEYCODE_BACK</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">KEYCODE_HOME</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">KEYCODE_APP_SWITCH</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ilee modify here --end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>隐藏导航栏</strong> 修改位于<code>frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/phone</code>的<code>NavigationBarView.java</code>文件</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// line:1213</span>
<span class="token comment">// ilee modify here --start</span>
<span class="token function">setSystemUiVisibility</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">SYSTEM_UI_FLAG_HIDE_NAVIGATION</span> <span class="token operator">|</span> <span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">SYSTEM_UI_FLAG_IMMERSIVE_STICKY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="编译结果-8" tabindex="-1"><a class="header-anchor" href="#编译结果-8" aria-hidden="true">#</a> 编译结果</h3><ol><li>修改来自<code>frameworks/base/packages/SystemUI/src/com/android/systemui</code>的<code>SystemUIApplication.java</code>文件 暴力开启</li><li>修改来自<code>frameworks\base\services\core\java\com\android\server\am</code>的<code>ActivityManagerService.java</code>文件</li></ol><h2 id="_0120v1" tabindex="-1"><a class="header-anchor" href="#_0120v1" aria-hidden="true">#</a> 0120v1</h2><h3 id="修改内容-9" tabindex="-1"><a class="header-anchor" href="#修改内容-9" aria-hidden="true">#</a> 修改内容</h3><ol><li>添加代码到<code>frameworks/base/services/core/java/com/android/server/wm</code>中的<code>ActivityTaskManagerService.java</code>文件中的<code>getHomeIntent</code>方法</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// line: 5870</span>
<span class="token comment">// ilee modify here --start</span>
<span class="token class-name">Settings<span class="token punctuation">.</span>Global</span><span class="token punctuation">.</span><span class="token function">putInt</span><span class="token punctuation">(</span>mContext<span class="token punctuation">.</span><span class="token function">getContentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Settings<span class="token punctuation">.</span>Global</span><span class="token punctuation">.</span><span class="token constant">DEVICE_PROVISIONED</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Settings<span class="token punctuation">.</span>Secure</span><span class="token punctuation">.</span><span class="token function">putInt</span><span class="token punctuation">(</span>mContext<span class="token punctuation">.</span><span class="token function">getContentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Settings<span class="token punctuation">.</span>Secure</span><span class="token punctuation">.</span><span class="token constant">USER_SETUP_COMPLETE</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> defStartPkg <span class="token operator">=</span> <span class="token string">&quot;dji.go.v5&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">Intent</span> queryIntent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">final</span> <span class="token class-name">PackageManager</span> mPm <span class="token operator">=</span> mContext<span class="token punctuation">.</span><span class="token function">getPackageManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
queryIntent<span class="token punctuation">.</span><span class="token function">addCategory</span><span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">CATEGORY_LAUNCHER</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
queryIntent<span class="token punctuation">.</span><span class="token function">setAction</span><span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">ACTION_MAIN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ResolveInfo</span><span class="token punctuation">&gt;</span></span> homeActivities <span class="token operator">=</span> mPm<span class="token punctuation">.</span><span class="token function">queryIntentActivities</span><span class="token punctuation">(</span>queryIntent<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>homeActivities <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> activityNum <span class="token operator">=</span> homeActivities<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ComponentName</span><span class="token punctuation">[</span><span class="token punctuation">]</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComponentName</span><span class="token punctuation">[</span>activityNum<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> activityNum<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ResolveInfo</span> info <span class="token operator">=</span> homeActivities<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        set<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComponentName</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>activityInfo<span class="token punctuation">.</span>packageName<span class="token punctuation">,</span> info<span class="token punctuation">.</span>activityInfo<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>defStartPkg<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>activityInfo<span class="token punctuation">.</span>packageName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Intent</span> intentaa <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span>mTopAction<span class="token punctuation">,</span> mTopData <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token class-name">Uri</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>mTopData<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            intentaa<span class="token punctuation">.</span><span class="token function">setComponent</span><span class="token punctuation">(</span>set<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            intentaa<span class="token punctuation">.</span><span class="token function">addCategory</span><span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">CATEGORY_HOME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> intentaa<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// ilee modify here --end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="编译结果-9" tabindex="-1"><a class="header-anchor" href="#编译结果-9" aria-hidden="true">#</a> 编译结果</h3><h2 id="_0120v2" tabindex="-1"><a class="header-anchor" href="#_0120v2" aria-hidden="true">#</a> 0120v2</h2><h3 id="修改内容-10" tabindex="-1"><a class="header-anchor" href="#修改内容-10" aria-hidden="true">#</a> 修改内容</h3><ol><li>==0120v1</li><li>修改来自<code>frameworks/base/core/java/android/app/StatusBarManager.java</code>的<code>disable</code>方法</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// line: 233</span>
<span class="token comment">// ilee modify here 1 line</span>
what <span class="token operator">=</span> what <span class="token operator">|</span> <span class="token constant">DISABLE_EXPAND</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><code>frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/phone/PhoneStatusBarView.java</code>的<code>onTouchEvent</code>方法</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//line: 224</span>
<span class="token comment">// ilee modify here --start</span>
<span class="token comment">// return barConsumedEvent || super.onTouchEvent(event);</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token comment">// ilee modify here --end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>修改底部导航栏功能 <strong>取消功能</strong> 修改位于<code>frameworks/base/services/core/java/com/android/server/policy</code>的<code>PhoneWindowManager.java</code>文件</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// line: 2673</span>
<span class="token comment">// ilee modify here --start</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">KEYCODE_BACK</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">KEYCODE_HOME</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">KEYCODE_APP_SWITCH</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//        if (keyCode == KeyEvent.KEYCODE_RECENT_APPS) {</span>
<span class="token comment">//            return -1;</span>
<span class="token comment">//        }</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">KEYCODE_NAVIGATE_IN</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">KEYCODE_NAVIGATE_OUT</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">KEYCODE_NAVIGATE_NEXT</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">KEYCODE_NAVIGATE_PREVIOUS</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ilee modify here --end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="编译结果-10" tabindex="-1"><a class="header-anchor" href="#编译结果-10" aria-hidden="true">#</a> 编译结果</h3><p>开机自启 仍然可以使用近期应用界面 下拉栏无法使用 返回键和HOME键也无法使用</p><h3 id="添加" tabindex="-1"><a class="header-anchor" href="#添加" aria-hidden="true">#</a> 添加</h3><h4 id="设置特定包为默认启动应用" tabindex="-1"><a class="header-anchor" href="#设置特定包为默认启动应用" aria-hidden="true">#</a> 设置特定包为默认启动应用</h4><h3 id="修改内容-11" tabindex="-1"><a class="header-anchor" href="#修改内容-11" aria-hidden="true">#</a> 修改内容</h3><ol><li>添加代码到<code>frameworks/base/services/core/java/com/android/server/wm</code>中的<code>ActivityTaskManagerService.java</code>文件中的<code>getHomeIntent</code>方法</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// line: 5870</span>
<span class="token comment">// ilee modify here --start</span>
<span class="token class-name">Settings<span class="token punctuation">.</span>Global</span><span class="token punctuation">.</span><span class="token function">putInt</span><span class="token punctuation">(</span>mContext<span class="token punctuation">.</span><span class="token function">getContentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Settings<span class="token punctuation">.</span>Global</span><span class="token punctuation">.</span><span class="token constant">DEVICE_PROVISIONED</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Settings<span class="token punctuation">.</span>Secure</span><span class="token punctuation">.</span><span class="token function">putInt</span><span class="token punctuation">(</span>mContext<span class="token punctuation">.</span><span class="token function">getContentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Settings<span class="token punctuation">.</span>Secure</span><span class="token punctuation">.</span><span class="token constant">USER_SETUP_COMPLETE</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> defStartPkg <span class="token operator">=</span> <span class="token string">&quot;dji.go.v5&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">Intent</span> queryIntent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">final</span> <span class="token class-name">PackageManager</span> mPm <span class="token operator">=</span> mContext<span class="token punctuation">.</span><span class="token function">getPackageManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
queryIntent<span class="token punctuation">.</span><span class="token function">addCategory</span><span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">CATEGORY_LAUNCHER</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
queryIntent<span class="token punctuation">.</span><span class="token function">setAction</span><span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">ACTION_MAIN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ResolveInfo</span><span class="token punctuation">&gt;</span></span> homeActivities <span class="token operator">=</span> mPm<span class="token punctuation">.</span><span class="token function">queryIntentActivities</span><span class="token punctuation">(</span>queryIntent<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>homeActivities <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> activityNum <span class="token operator">=</span> homeActivities<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ComponentName</span><span class="token punctuation">[</span><span class="token punctuation">]</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComponentName</span><span class="token punctuation">[</span>activityNum<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> activityNum<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ResolveInfo</span> info <span class="token operator">=</span> homeActivities<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        set<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComponentName</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>activityInfo<span class="token punctuation">.</span>packageName<span class="token punctuation">,</span> info<span class="token punctuation">.</span>activityInfo<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>defStartPkg<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>activityInfo<span class="token punctuation">.</span>packageName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Intent</span> intentaa <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span>mTopAction<span class="token punctuation">,</span> mTopData <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token class-name">Uri</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>mTopData<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            intentaa<span class="token punctuation">.</span><span class="token function">setComponent</span><span class="token punctuation">(</span>set<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            intentaa<span class="token punctuation">.</span><span class="token function">addCategory</span><span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">CATEGORY_HOME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> intentaa<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// ilee modify here --end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="取消绘制底部按钮" tabindex="-1"><a class="header-anchor" href="#取消绘制底部按钮" aria-hidden="true">#</a> 取消绘制底部按钮</h4><ol><li>修改<code>frameworks/base/core/res/res/values/dimens.xml</code></li></ol><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>    <span class="token comment">&lt;!--    ilee modify here start  --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dimen</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>navigation_bar_height<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>0dp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dimen</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- Height of the bottom navigation bar in portrait; often the same as @dimen/navigation_bar_height --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dimen</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>navigation_bar_height_landscape<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>0dp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dimen</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--    ilee modify here end  --&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>修改<code>frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/phone/NavigationHandle.java</code></li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// line: 81</span>
<span class="token comment">// ilee modify here 1 line</span>
<span class="token comment">// canvas.drawRoundRect(0, y, width, y + height, mRadius, mRadius, mPaint);</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>修改底部导航栏功能 <strong>取消功能</strong> 修改位于<code>frameworks/base/services/core/java/com/android/server/policy</code>的<code>PhoneWindowManager.java</code>文件</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// line: 2673</span>
<span class="token comment">// ilee modify here --start</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">KEYCODE_BACK</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">KEYCODE_HOME</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">KEYCODE_APP_SWITCH</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//        if (keyCode == KeyEvent.KEYCODE_RECENT_APPS) {</span>
<span class="token comment">//            return -1;</span>
<span class="token comment">//        }</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">KEYCODE_MENU</span>
        <span class="token operator">||</span> keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">KEYCODE_ALL_APPS</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">KEYCODE_NAVIGATE_IN</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">KEYCODE_NAVIGATE_OUT</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">KEYCODE_NAVIGATE_NEXT</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">KEYCODE_NAVIGATE_PREVIOUS</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ilee modify here --end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="添加-1" tabindex="-1"><a class="header-anchor" href="#添加-1" aria-hidden="true">#</a> 添加</h3><h4 id="修改-logo" tabindex="-1"><a class="header-anchor" href="#修改-logo" aria-hidden="true">#</a> 修改 Logo</h4><p><strong>安卓开机Logo</strong></p><ol><li>修改<code>frameworks/base/core/res/assets/images</code>内的<code>android-logo-mask.png</code>文件 <strong>主板logo</strong></li><li>修改<code>kernel</code>内的<code>logo.bmp</code>以及<code>logo_kernel.bmp</code>文件</li></ol><h3 id="添加-2" tabindex="-1"><a class="header-anchor" href="#添加-2" aria-hidden="true">#</a> 添加</h3><h4 id="去掉开机-正在启动弹窗" tabindex="-1"><a class="header-anchor" href="#去掉开机-正在启动弹窗" aria-hidden="true">#</a> 去掉开机 正在启动弹窗</h4><ol><li>修改<code>frameworks/base/services/core/java/com/android/server/wm/WindowManagerService.java</code>中的<code>performEnableScreen</code>方法</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// line: 3453</span>
<span class="token comment">// ilee modify here --start</span>
<span class="token comment">/* if (!mBootAnimationStopped) {
    Trace.asyncTraceBegin(TRACE_TAG_WINDOW_MANAGER, &quot;Stop bootanim&quot;, 0);
    // stop boot animation
    // formerly we would just kill the process, but we now ask it to exit so it
    // can choose where to stop the animation.
    SystemProperties.set(&quot;service.bootanim.exit&quot;, &quot;1&quot;);
    mBootAnimationStopped = true;
}

if (!mForceDisplayEnabled &amp;&amp; !checkBootAnimationCompleteLocked()) {
    ProtoLog.i(WM_DEBUG_BOOT, &quot;performEnableScreen: Waiting for anim complete&quot;);
    return;
}

try {
    IBinder surfaceFlinger = ServiceManager.getService(&quot;SurfaceFlinger&quot;);
    if (surfaceFlinger != null) {
        ProtoLog.i(WM_ERROR, &quot;******* TELLING SURFACE FLINGER WE ARE BOOTED!&quot;);
        Parcel data = Parcel.obtain();
        data.writeInterfaceToken(&quot;android.ui.ISurfaceComposer&quot;);
        surfaceFlinger.transact(IBinder.FIRST_CALL_TRANSACTION, // BOOT_FINISHED
                data, null, 0);
        data.recycle();
    }
} catch (RemoteException ex) {
    ProtoLog.e(WM_ERROR, &quot;Boot completed: SurfaceFlinger is dead!&quot;);
} */</span>
<span class="token comment">// ilee modify here --end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>修改<code>frameworks/base/services/core/java/com/android/server/wm/ActivityRecord.java</code>中的<code>onWindowsDrawn</code>方法</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// line: 5413</span>
        <span class="token comment">// ilee modify here --start</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isHomeIntent</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> shortComponentName <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>shortComponentName<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;FallbackHome&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">SystemProperties</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;service.bootanim.exit&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">&quot;ActivityRecord&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;real home.....&quot;</span> <span class="token operator">+</span> shortComponentName<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//SystemService.stop(&quot;bootanim&quot;);</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">IBinder</span> surfaceFlinger <span class="token operator">=</span> <span class="token class-name">ServiceManager</span><span class="token punctuation">.</span><span class="token function">getService</span><span class="token punctuation">(</span><span class="token string">&quot;SurfaceFlinger&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>surfaceFlinger <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Slog</span><span class="token punctuation">.</span><span class="token function">i</span><span class="token punctuation">(</span><span class="token constant">TAG_WM</span><span class="token punctuation">,</span> <span class="token string">&quot;******* TELLING SURFACE FLINGER WE ARE BOOTED!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">Parcel</span> data <span class="token operator">=</span> <span class="token class-name">Parcel</span><span class="token punctuation">.</span><span class="token function">obtain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    data<span class="token punctuation">.</span><span class="token function">writeInterfaceToken</span><span class="token punctuation">(</span><span class="token string">&quot;android.ui.ISurfaceComposer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    surfaceFlinger<span class="token punctuation">.</span><span class="token function">transact</span><span class="token punctuation">(</span><span class="token class-name">IBinder</span><span class="token punctuation">.</span><span class="token constant">FIRST_CALL_TRANSACTION</span><span class="token punctuation">,</span> <span class="token comment">// BOOT_FINISHED</span>
                            data<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    data<span class="token punctuation">.</span><span class="token function">recycle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">RemoteException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Slog</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token constant">TAG_WM</span><span class="token punctuation">,</span> <span class="token string">&quot;Boot completed: SurfaceFlinger is dead!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// ilee modify here --end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>修改<code>packages/apps/Settings/src/com/android/settings/FallbackHome.java</code>中的<code>mProgressTimeoutRunnable</code>方法</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// line: 52</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Runnable</span> mProgressTimeoutRunnable <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// ilee modify here --start</span>
<span class="token comment">//        View v = getLayoutInflater().inflate(</span>
<span class="token comment">//                R.layout.fallback_home_finishing_boot, null /* root */);</span>
<span class="token comment">//        setContentView(v);</span>
<span class="token comment">//        v.setAlpha(0f);</span>
<span class="token comment">//        v.animate()</span>
<span class="token comment">//                .alpha(1f)</span>
<span class="token comment">//                .setDuration(500)</span>
<span class="token comment">//                .setInterpolator(AnimationUtils.loadInterpolator(</span>
<span class="token comment">//                        this, android.R.interpolator.fast_out_slow_in))</span>
<span class="token comment">//                .start();</span>
        <span class="token comment">// ilee modify here --end</span>
        <span class="token function">getWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addFlags</span><span class="token punctuation">(</span><span class="token class-name">LayoutParams</span><span class="token punctuation">.</span><span class="token constant">FLAG_KEEP_SCREEN_ON</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="默认手势导航" tabindex="-1"><a class="header-anchor" href="#默认手势导航" aria-hidden="true">#</a> 默认手势导航</h4><ol><li>修改<code>frameworks/base/core/res/res/values/config.xml</code>文件</li></ol><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>    <span class="token comment">&lt;!-- Controls the navigation bar interaction mode:
         0: 3 button mode (back, home, overview buttons)
         1: 2 button mode (back, home buttons + swipe up for overview)
         2: gestures only for back, home and overview --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>integer</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>config_navBarInteractionMode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>integer</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料" aria-hidden="true">#</a> 参考资料</h2><ol><li>开机自启动 <ul><li><a href="https://blog.csdn.net/u010823818/article/details/144415966?fromshare=blogdetail&amp;sharetype=blogdetail&amp;sharerId=144415966&amp;sharerefer=PC&amp;sharesource=weixin_50843001&amp;sharefrom=from_link" target="_blank" rel="noopener noreferrer">默认Launcher（全网最全、任意Android版本、任意应用）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://blog.csdn.net/youthking1314/article/details/128393909?fromshare=blogdetail&amp;sharetype=blogdetail&amp;sharerId=128393909&amp;sharerefer=PC&amp;sharesource=weixin_50843001&amp;sharefrom=from_link" target="_blank" rel="noopener noreferrer">开机直接进入该应用作为默认launcher（霸屏）或者开机自启指定应用<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul></li><li>应用内置 <ul><li><a href="https://blog.csdn.net/HuanWen_Cheng/article/details/141065714?fromshare=blogdetail&amp;sharetype=blogdetail&amp;sharerId=141065714&amp;sharerefer=PC&amp;sharesource=weixin_50843001&amp;sharefrom=from_link" target="_blank" rel="noopener noreferrer">RK平台如何 将第三方资源文件和代码编译到系统内<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.jianshu.com/p/fafff8d985a3" target="_blank" rel="noopener noreferrer">【RK3568】Android 11预装（内置）应用到系统中<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.cnblogs.com/topeet/p/18560526" target="_blank" rel="noopener noreferrer">基于迅为RK3568开发板全国产平台，快速实现APP开机自启动技术分享<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://blog.csdn.net/a546036242/article/details/121992823" target="_blank" rel="noopener noreferrer">Android 10 RK 集成第三方apk<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul></li><li>取消导航栏功能 <ul><li><a href="https://blog.csdn.net/jingzhemodao/article/details/131088784" target="_blank" rel="noopener noreferrer">android11源码去掉底部虚拟按钮导航<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://developer.aliyun.com/article/1196768" target="_blank" rel="noopener noreferrer">Android6.0 源码修改之屏蔽导航栏虚拟按键（Home和RecentAPP）/动态显示和隐藏NavigationBar<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://blog.csdn.net/hedalei/article/details/140021960" target="_blank" rel="noopener noreferrer">Android11以上系统实现app霸屏的一种设置<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.60if.com/361.html" target="_blank" rel="noopener noreferrer">Android KeyEvent 按键事件<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul></li><li>取消下拉栏 <ul><li><a href="https://www.cnblogs.com/guanxinjing/p/17969803" target="_blank" rel="noopener noreferrer">Android系统开发 禁止状态栏下拉功能<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul></li><li>修改Android开机logo <ul><li><a href="https://blog.csdn.net/qq_37858386/article/details/120365883" target="_blank" rel="noopener noreferrer">2021-09-18 Android 开机logo修改和简单代码分析<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul></li><li>修改开机屏幕中心弹窗 <ul><li><a href="https://blog.csdn.net/TQ_wangbin/article/details/135132729?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-1-135132729-blog-124710885.235%5Ev43%5Epc_blog_bottom_relevance_base9&amp;spm=1001.2101.3001.4242.2&amp;utm_relevant_index=4" target="_blank" rel="noopener noreferrer">方法|rk3568开发平台如何去除android正在启动弹窗<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://mbb.eet-china.com/blog/4098392-461673.html" target="_blank" rel="noopener noreferrer">RK3566RK3568开发板Android11屏蔽开机启动提示，优化启动时间<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul></li><li>消除消息提示弹窗 <ul><li><a href="https://blog.csdn.net/TQ_wangbin/article/details/135132729?fromshare=blogdetail&amp;sharetype=blogdetail&amp;sharerId=135132729&amp;sharerefer=PC&amp;sharesource=weixin_50843001&amp;sharefrom=from_link" target="_blank" rel="noopener noreferrer">方法|rk3568开发平台如何去除android正在启动弹窗<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 貌似一并解决了</li><li><a href=""></a></li></ul></li></ol></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: zihao02325@gmail.com">ileepop</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/docs/assets/app-06cd0c15.js" defer></script>
  </body>
</html>
